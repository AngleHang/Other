C语言常见Q&A
========
Q1：`scanf("%d",&i)`时输入float型或double会如何？  
Q2：malloc()或者realloc()一定要强转吗？  
Q3：如何用scanf()读取固定长度的字符串？  
Q4：`sizeof()`是一个函数吗，还是一个宏？  
Q5：`FILE *fp`与`int fd`有什么限制？  
Q6：static变量是什么变量？  
Q7：如何确定域在结构体中的字节偏移量？  
Q8：预处理语句的格式？  
Q9：
Q10：
Q11：

**Q1**：`scanf("%d",&i)`时输入float型或double会如何？  
**A1**：读取失败，输入的数据留在输入缓冲区中，之后的scanf()不执行，需用`fflush(stdin)`刷新输入缓冲区

--------
**Q2**：malloc()或者realloc()一定要强转吗？  
**A2**：不一定需要，malloc()返回void型指针，编译器会自动转化

--------
**Q3**：如何用scanf()读取固定长度的字符串？  
**A3**：`scanf("%ns")`可限定scanf读取的字符个数使数组不越界，但scanf()以空格回车为分隔符，故无法读入带空格的字符串。而gets()能输入带空格的字符串，但gets是不安全的没因为无法保证读入的长度不超过数组的长度，可以使用`fgets(char *str,int read_byte,int fd)`，从标准输入读取，既可以控制长度，又能输入空格

--------
**Q4**：`sizeof()`是一个函数吗，还是一个宏？  
**A4**：都不是，`sizeof()`是一个运算符

--------
**Q5**：`FILE *fp`与`int fd`有什么限制？  
**A5**：不能与标准文件重名，即不能定义`int stdin`;

--------
**Q6**：static变量是什么变量？  
**A6**：static是静态变量，在函数内定义static修饰的变量表示变量是静态变量，在函数外的全局变量中用static修饰表示变量无法在外部文件引用。static进行声明时可省略类型，默认为int，默认初始值为0

--------
**Q7**：如何确定域在结构体中的字节偏移量？  
**A7**：在<stddef.h>中定义了`offsetof()`宏，用`offsetof(struct s,f)`可以计算出域f在结构体s中的偏移量。也可自己用下面代码实现：
```c
#define offsetof(type,f) ((size_t) (char*)&((type*)0)->f - (char*)(type*)0)
```

--------
**Q8**：预处理语句的格式？  
**A8**：以`#`开头，且只能单独一行

--------
**Q9**：`a>0?a:b = 5`可以这么赋值吗，为什么？  
**A9**：不行，`?:`生成的值是右值，不能被赋值，但可以这样，`*(a>0?&a:&b) = 5`

--------
**Q10**：`*p++`是p自增还是`*p`自增？  
**A10**：++运算符比``*``的优先级高，因此上式等价于`*(p++)`，是p自增。若要想自增p指向的值，必须使用`(*p)++`

--------
**Q11**：`(int*)p++`为什么编译错误？  
**A11**：类型强制转化后生成一个右值，不能赋值，因此无法使用自增运算符

--------
**Q12**：为什么在一个文件中定义`char a[6]`，在另一个文件中声明了`extern char *a`不行？  
**A12**：前者是数组，后者是指针，不能混为一谈，要使用`extern char a[]`

--------
**Q13**：如果arr是数组，那么arr和&arr有什么区别？  
**A13**：区别在于类型，&arr生成一个"T型数组"的指针，指向整个数组，而对数组的简单应用arr生成一个"T的指针"类型的指针，指向数组中的第一个成员

--------
**Q14**：为什么`a[0]`也可以用`0[a]`表示？  
**A14**：C语言中下标引用"[]"只是指针算术运算的语法糖，即`a[0]`等价于`*(a+0)`，故`0[a]`等价于`*(0+a)`，两者指向同一地址，只是后者有些奇怪

--------
**Q15**：
**A15**：

--------
**Q16**：
**A16**：

--------
**Q17**：
**A17**：
